name: Apply Terraform - Development

on:
  push:
    branches:
    - main
                        
env:
  region: "eu-north-1"
  enviroment: "development"
  GIT_HASH: ${{ github.sha }}
  REPO_NAME: ${{ github.event.repository.name }}  

permissions:
  id-token: write
  contents: read
    
jobs:
  PlanAndApply:
    runs-on: ubuntu-latest

    environment: "xxxxx"
    env:
      ENV_PUB_KEY: ${{ secrets.ENV_PUB_KEY }}
    
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Call Foo
        uses: AgosOrg/simple_play_TF/.github/actions/foo@main
        with:
          ENV_PUB_KEY: ${{ env.ENV_PUB_KEY }}